<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Topic</title>
    <!--
    <script src="funcs.js" type="text/javascript"></script>
    -->
    <script>
        function openTopic(n) {
            if (n > 0 && n < 5){
                window.sessionStorage.setItem("topicNr", n);
                window.location.href = "topicPage.html";
            }
            else if (n < 1) {
                document.getElementById("status").innerHTML = "куда блэтб, это первая тема!";
                setTimeout(function(){
                    document.getElementById("status").innerHTML = '';
                }, 3000);
            } else if (n > 4) {
                document.getElementById("status").innerHTML = "куда блэтб, тем всего 4!";
                setTimeout(function(){
                    document.getElementById("status").innerHTML = '';
                }, 3000);
            }
        }

        function sendResponse(response) {
            if (response === 1)
                response = "YES";
            else response = "NO";
            const Http = new XMLHttpRequest();
            const url='https://api.telegram.org/bot783515666:AAFJv0pFMX5T9QNLum1f0wARdvHe-zQ0pbs/getMe';
            Http.open("GET", url);
            Http.send();

            var millisecondsToWait = 1000;
            setTimeout(function() {
                // Whatever you want to do after the wait
            }, millisecondsToWait);

            const url2='https://api.telegram.org/bot783515666:AAFJv0pFMX5T9QNLum1f0wARdvHe-zQ0pbs/sendMessage'
                + '?chat_id=289778663'
                + '&text=' + response;
            Http.open("POST", url2);
            Http.send();

            document.getElementById("resp").innerHTML = "Услышал тебя"
        }
    </script>
</head>
<body>
<p id="topicDescr"></p>
<button onclick="openTopic(parseInt(topicNr)-1)">пред. тема</button>
<button onclick="openTopic(parseInt(topicNr)+1)">след. тема</button>
<p id="status" style="color:red"></p>

<script>
    var topicNr = window.sessionStorage.getItem("topicNr");
    document.getElementById("topicDescr").innerHTML = "здесб будет тема " + topicNr;
    window.document.title = "Topic " + topicNr;
</script>
<!--
      <script src = "response.js" type="text/javascript"></script>
      -->
<script>
    document.write('\
      <h1>ну че?</h1>\
      <button onclick="sendResponse(1)">ГО</button>\
      <button onclick="sendResponse(2)">ИДИ НАХУЙ</button>\
      <h1 id = "resp"></h1>\
      ');
</script>

</body>
</html>